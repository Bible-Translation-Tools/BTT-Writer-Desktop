
<link rel="import" href="../../components/paper-button/paper-button.html">

<dom-module id="ts-software">

    <style>

        :host {
        }

        #content {
            margin: 20px 35px;
            color: var(--primary-text-color);
        }

        #buttons {
            display: flex;
            justify-content: center;
            margin: 25px;
            color: var(--secondary-text-color);
        }

        #buttons paper-button:hover {
            color: var(--accent-color);
        }

    </style>

    <template>

        <div id="content">
            <h2>Software Licenses</h2>
            <p>The following licenses apply to code packages and libraries used in this app.</p>
            <template is="dom-repeat" items="[[packages]]" as="package">
                <h2>[[package.name]]</h2>
                <p><a href="[[package.link]]">[[package.link]]</a></p>
                <p>License Type: <span>[[package.type]]</span></p>
            </template>
        </div>
        <div id="buttons">
            <paper-button dialog-dismiss>Close</paper-button>
        </div>

    </template>

</dom-module>

<script>

    Polymer({
        is: 'ts-software',

        properties: {
            packages: {
                type: Array,
                value: []
            }
        },

        ready: function() {
            var mythis = this;
            var shell = require('electron').shell;
            var packages = [
                {name: 'adm-zip', link: 'https://www.npmjs.com/package/adm-zip', type: 'MIT'},
                {name: 'archiver', link: 'https://www.npmjs.com/package/archiver', type: ''},
                {name: 'async', link: 'https://www.npmjs.com/package/async', type: ''},
                {name: 'chmodr', link: 'https://www.npmjs.com/package/chmodr', type: ''},
                {name: 'door43-client', link: 'https://www.npmjs.com/package/door43-client', type: ''},
                {name: 'fontkit', link: 'https://www.npmjs.com/package/fontkit', type: ''},
                {name: 'fs-extra', link: 'https://www.npmjs.com/package/node-fs-extra', type: ''},
                {name: 'getmac', link: 'https://www.npmjs.com/package/getmac', type: ''},
                {name: 'gogs-client', link: 'https://www.npmjs.com/package/gogs-client', type: ''},
                {name: 'js-yaml', link: 'https://www.npmjs.com/package/js-yaml', type: ''},
                {name: 'jsonfile', link: 'https://www.npmjs.com/package/jsonfile', type: ''},
                {name: 'keypair', link: 'https://www.npmjs.com/package/keypair', type: ''},
                {name: 'locale', link: 'https://www.npmjs.com/package/locale', type: ''},
                {name: 'lodash', link: 'https://www.npmjs.com/package/lodash', type: ''},
                {name: 'md5', link: 'https://www.npmjs.com/package/MD5', type: ''},
                {name: 'mkdirp', link: 'https://www.npmjs.com/package/mkdirp', type: ''},
                {name: 'moment', link: 'https://www.npmjs.com/package/moment', type: ''},
                {name: 'node-forge', link: 'https://www.npmjs.com/package/node-forge', type: ''},
                {name: 'prince', link: 'https://www.npmjs.com/package/prince', type: ''},
                {name: 'request', link: 'https://www.npmjs.com/package/request', type: ''},
                {name: 'rimraf', link: 'https://www.npmjs.com/package/rimraf', type: ''},
                {name: 'sql.js', link: 'https://www.versioneye.com/nodejs/sql.js/0.3.2', type: ''},
                {name: 'trash', link: 'https://www.npmjs.com/package/trash', type: ''},
                {name: 'untildify', link: 'https://www.npmjs.com/package/untildify', type: ''}
            ];

            mythis.set('packages', packages);

            setTimeout(function() {
                var links = mythis.$.content.getElementsByTagName('a');

                for (var i = 0; i < links.length; i++) {
                    links[i].addEventListener('click', function (event) {
                        event.preventDefault();
                        shell.openExternal(this.href);
                    });
                }
            }, 3000);
        }

    });

</script>
