<!DOCTYPE html>
<html>
<head>
    <title>BTT Writer</title>

    <script src="../components/webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="stylesheet" href="../css/main.css">

    <link rel="import" href="../components/polymer/polymer.html">
    <link rel="import" href="../elements/ts-main/ts-splash.html">
    <link rel="import" href="../elements/ts-main/app-theme.html">

</head>
<body>
    <ts-splash id="splash"></ts-splash>

    <script>
    (function () {
        var ipcRenderer = require('electron').ipcRenderer;
        var splash = document.getElementById('splash');
        var pack = require('../../package');
        var path = require('path');
        var i18n = require('../js/i18n').Locale(path.resolve(path.join(__dirname, '..', '..', 'i18n')));

        var versiontext = i18n.translate("version_title", pack.version);

        splash.content = {title: "BTT Writer", subtitle: versiontext, message: i18n.translate("loading_text")};

        const Configurator = require('../js/configurator').Configurator;
        const configurator = new Configurator();
        configurator.setStorage(window.localStorage);
        const theme = configurator.getUserSetting("colortheme").name;

        ipcRenderer.send('theme-loaded', theme);

        ipcRenderer.on('loading-status', function (event, status) {
            splash.updateMessage(status);
        });
    })();
    </script>
</body>
</html>
