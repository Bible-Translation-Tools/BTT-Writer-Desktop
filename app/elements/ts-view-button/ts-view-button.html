<!--
View Button
-->

<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/paper-fab/paper-fab.html">
<link rel="import" href="ts-view-button-icons.html">

<dom-module id="ts-view-button">

  <style>

      paper-fab {
          border-radius: 49.9999%;
      }

      paper-fab.fixed {
          background: var(--accent-color-light);
          color: white;
      }

      paper-fab.animate {
          background: white;
          color: black;
      }

      .fixed {
          position: absolute;
          right: 30px;
          bottom: 30px;
      }

      .animate {
          opacity: 0;
          position: absolute;
          right: 38px;
          bottom: 38px;

      }

      #fullcontain {
          height: 100vh;
          width: 100vw;
      }

      #buttonbox {
          position: fixed;
          right: 0;
          bottom: 0;
          height: 400px;
          width: 150px;
      }

      .openread {
        -webkit-animation: openread .3s ease-in forwards;
      }

      .closeread {
        -webkit-animation: closeread 0.3s ease-in forwards;
      }

      @-webkit-keyframes openread {
          0% {
              opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);
          }
          100% {
              opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-190px,0);
          }
      }

      @-webkit-keyframes closeread {
          0% {
            opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-190px,0);
          }
          100% {
            opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);
          }
      }

      .openpreview {
          -webkit-animation: openpreview .3s ease-in forwards;
      }

      .closepreview {
          -webkit-animation: closepreview 0.3s ease-in forwards;
      }

      @-webkit-keyframes openpreview {
          0% {
              opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);
          }
          100% {
              opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-130px,0);
          }
      }

      @-webkit-keyframes closepreview {
          0% {
              opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-130px,0);
          }
          100% {
              opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);
          }
      }

      .openfull {
          -webkit-animation: openfull .3s ease-in forwards;
      }

      .closefull {
          -webkit-animation: closefull 0.3s ease-in forwards;
      }

      @-webkit-keyframes openfull {
          0% {
              opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);
          }
          100% {
              opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-70px,0);
          }
      }

      @-webkit-keyframes closefull {
          0% {
              opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-70px,0);
          }
          100% {
              opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);
          }
      }

  </style>

  <template>

    <div class="clickable" id="fullcontain" on-tap="MainTapHandler">
        <div id="buttonbox">
            <paper-fab class="clickable animate" id="readbutton" mini icon="view-button:read"></paper-fab>
            <paper-fab class="clickable animate" id="previewbutton" mini icon="view-button:preview"></paper-fab>
            <paper-fab class="clickable animate" id="fullscreenbutton" mini icon="view-button:fullscreen"></paper-fab>
            <paper-fab class="clickable fixed" id="viewbutton" icon="[[icon]]"></paper-fab>
        </div>
    </div>

  </template>
</dom-module>

<script>

Polymer({
  is: 'ts-view-button',

    ViewTapHandler: function(event) {

    },

    MainTapHandler: function(event) {
        var etarget = event.target;
        var readbutton = this.$.readbutton;
        var previewbutton = this.$.previewbutton;
        var fullbutton = this.$.fullscreenbutton;
        var viewbutton = this.$.viewbutton;

        while (!etarget.classList.contains("clickable")) {
            etarget = etarget.parentNode;
        }

        if (etarget.id === "viewbutton" && !viewbutton.classList.contains("expanded")) {
            readbutton.classList.add('openread');
            readbutton.classList.remove('closeread');
            previewbutton.classList.add('openpreview');
            previewbutton.classList.remove('closepreview');
            fullbutton.classList.add('openfull');
            fullbutton.classList.remove('closefull');
            this.icon = "view-button:close";
            viewbutton.classList.add('expanded');
        } else if (etarget.id === "fullscreenbutton") {
            alert('you clicked the full screen button');
        } else if (etarget.id === "previewbutton") {
            alert('you clicked the preview button');
        } else if (etarget.id === "readbutton") {
            alert('you clicked the read button');
        } else {
            readbutton.classList.add('closeread');
            readbutton.classList.remove('openread');
            previewbutton.classList.add('closepreview');
            previewbutton.classList.remove('openpreview');
            fullbutton.classList.add('closefull');
            fullbutton.classList.remove('openfull');
            this.icon = "view-button:view";
            viewbutton.classList.remove('expanded');
        }

    },

  ready: function() {
    this.icon = "view-button:view";
    // oh boy!
  }
});

</script>
