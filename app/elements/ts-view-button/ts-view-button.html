<!--
View Button
-->

<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/paper-fab/paper-fab.html">
<link rel="import" href="ts-view-button-icons.html">

<dom-module id="ts-view-button">

  <style>

      paper-fab {
          border-radius: 49.9999%;
      }

      paper-fab.fixed {
          background: var(--accent-color-light);
          color: white;
      }

      paper-fab.animate {
          background: white;
          color: black;
      }

      .fixed {
          position: absolute;
          left: 40px;
          bottom: 40px;
      }

      .animate {
          opacity: 1;
          position: absolute;
          left: 48px;
          bottom: 148px;
      }

      #fullcontain {
          height: 100vh;
          width: 100vw;
          position: fixed;
          top: 0;
          left: 0;
      }

      #buttonbox {
          position: fixed;
          left: 0;
          bottom: 0;
          height: 400px;
          width: 150px;
      }

      .open {
        -webkit-animation: open 0.75s ease-in forwards;
      }

      .close {
        -webkit-animation: close 0.33s ease-in forwards;
      }

      @-webkit-keyframes open {
          0% {
              opacity: 0;
              transform: scale3d(0,0,1) translate3d(0,0,0);

          }
          100% {
              opacity: 1;
              transform: scale3d(1,1,1) translate3d(0,-100px,0);
          }
      }

      @-webkit-keyframes close {
          0% {
            opacity: 1;
          }
          100% {
            opacity: 0;
          }
      }


  </style>

  <template>

    <div class="clickable" id="fullcontain" on-tap="MainTapHandler">
        <div id="buttonbox">

                <paper-fab class="clickable animate" id="readbutton" mini icon="view-button:read"></paper-fab>
                <paper-fab class="clickable" id="preview-button" mini icon="view-button:preview"></paper-fab>
                <paper-fab class="clickable" id="fullscreen-button" mini icon="view-button:fullscreen"></paper-fab>

                <paper-fab class="clickable fixed" id="viewbutton" icon="[[icon]]"></paper-fab>


        </div>
    </div>


  </template>
</dom-module>

<script>

Polymer({
  is: 'ts-view-button',

    ViewTapHandler: function(event) {

    },

    MainTapHandler: function(event) {
        var etarget = event.target,
            readbutton = this.$.readbutton;

        while (!etarget.classList.contains("clickable")) {
            etarget = etarget.parentNode;
        }

        if (etarget.id === "viewbutton") {
            readbutton.classList.add('open');
            readbutton.classList.remove('close');
            this.icon = "view-button:close"
        } else if (etarget.id === "fullscreen-button") {
            alert('you clicked the full screen button');
        } else if (etarget.id === "preview-button") {
            alert('you clicked the preview button');
        } else if (etarget.id === "read-button") {
            alert('you clicked the read button');
        } else {
            readbutton.classList.add('close');
            readbutton.classList.remove('open');
            this.icon = "view-button:view";
        }


    },

    FullscreenTapHandler: function(event) {

    },

    PreviewTapHandler: function(event) {


    },

    ReadTapHandler: function(event) {


    },

  ready: function() {
    this.icon = "view-button:view";
    // oh boy!
  }
});

</script>
