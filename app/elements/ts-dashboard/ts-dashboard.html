<link rel="import" href="../../components/iron-pages/iron-pages.html">
<link rel="import" href="../../components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../components/more-routing/more-routing.html">
<link rel="import" href="../../components/neon-animation/neon-animation.html">

<link rel="import" href="../ts-home/ts-home.html">
<link rel="import" href="../ts-new-project-menus/ts-new-project-menus.html">
<link rel="import" href="../ts-publish/ts-publish.html">

<link rel="import" href="../ts-read-mode/ts-read-mode.html">
<link rel="import" href="../ts-read-mode/ts-review-mode.html">

<dom-module id="ts-dashboard">

  <style>

      :host {
          display: flex;
          width: 100%;
          position: relative;
          flex: auto;
      }

      more-route-selector {
          flex: auto;
          display: flex;
      }

      neon-animated-pages {
          flex: auto;
          display: flex;
      }

      neon-animated-pages>* {
          flex: auto;
      }

  </style>

  <template>

      <more-routing-config driver="hash"></more-routing-config>

      <more-route-selector>
          <neon-animated-pages entry-animation="slide-from-left-animation" exit-animation="slide-right-animation">
              <ts-home-blank route="/"></ts-home-blank>

              <ts-home-menu route="/home"></ts-home-menu>

              <ts-language-menu route="/languagemenu" language="{{targetlanguage}}"></ts-language-menu>
              <ts-project-menu route="/projectmenu" language="[[targetlanguage]]" group="{{targetgroup}}"></ts-project-menu>
              <ts-book-menu route="/bookmenu" language="[[targetlanguage]]" group="[[targetgroup]]" book="{{targetbook}}" chapters="{{targetchapters}}"></ts-book-menu>
              <ts-chapter-menu route="/chaptermenu" language="[[targetlanguage]]" group="[[targetgroup]]" book="[[targetbook]]" chapters="[[targetchapters]]" chapter="{{targetchapter}}"></ts-chapter-menu>

              <ts-read-mode route="/readmode"></ts-read-mode>
              <ts-review-mode route="/reviewmode"></ts-review-mode>

              <ts-publish-publish route="/publishupload" language="[[targetlanguage]]" book="[[targetbook]]"></ts-publish-publish>
              <ts-publish-review route="/publishreview" language="[[targetlanguage]]" book="[[targetbook]]"></ts-publish-review>
              <ts-publish-profile route="/publishprofile" language="[[targetlanguage]]" book="[[targetbook]]"></ts-publish-profile>
              <ts-publish-book route="/publishbook" language="[[targetlanguage]]" book="[[targetbook]]"></ts-publish-book>



          </neon-animated-pages>
      </more-route-selector>

</template>

</dom-module>

<script>
/*
    MoreRouting.HashDriver.before = function (cb) {
        console.log("before");
        var h = location.hash.substr(2);
        var e = document.querySelector("[route='" + h + "']");
        e.classList.remove("active");
        setTimeout(cb, 1000);
    };

    MoreRouting.HashDriver.after = function () {
        console.log("after");
        var h = location.hash.substr(2);
        var e = document.querySelector("[route='" + h + "']");
        e.classList.add("active");
    };

    var old = MoreRouting.HashDriver.prototype.navigateToUrl;
    console.log(JSON.stringify(old));

    MoreRouting.HashDriver.prototype.navigateToUrl = function (url) {
        console.log("hi");
        MoreRouting.HashDriver.before(function () {
            old(url);
            MoreRouting.HashDriver.after();
        });
    };
*/
  Polymer({
      is: 'ts-dashboard',

      properties: {
          selected: {
              type: Number,
              value: 0
          },
          targetlanguage: {
              type: Object,
              value: {}
          },
          targetgroup: {
              type: Object,
              value: {}
          },
          targetbook: {
              type: Object,
              value: {}
          },
          targetchapters: {
              type: Array,
              value: []
          },
          targetchapter: {
              type: Number,
              value: null
          }
      },

      ready: function() {

      }
  });

</script>
