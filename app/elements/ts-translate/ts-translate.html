
<link rel="import" href="../../components/neon-animation/neon-animation.html">

<link rel="import" href="./ts-read-mode/ts-read-mode.html">
<link rel="import" href="./ts-chunk-mode/ts-chunk-mode.html">
<link rel="import" href="./ts-review-mode/ts-review-mode.html">
<link rel="import" href="./ts-translate-sidebar.html">

<dom-module id="ts-translate">

    <style>

        :host {
            display: flex;
        }

        neon-animated-pages {
            flex: auto;
            display: flex;
        }

        neon-animated-pages > * {
            flex: auto;
        }

    </style>

    <template>

        <ts-translate-sidebar route="{{route}}" selected="{{selected}}"></ts-translate-sidebar>

        <neon-animated-pages selected="[[selected]]" exit-animation="scale-down-animation" entry-animation="scale-up-animation">
            <ts-read-mode project="[[project]]" source="[[source]]" translation="[[translation]]" sources="{{sources}}" selected-source="{{selectedSource}}"></ts-read-mode>
            <ts-chunk-mode project="[[project]]" source="[[source]]" translation="{{translation}}" sources="{{sources}}" selected-source="{{selectedSource}}"></ts-chunk-mode>
            <ts-review-mode project="[[project]]" source="[[source]]" translation="{{translation}}" sources="{{sources}}" selected-source="{{selectedSource}}"></ts-review-mode>
        </neon-animated-pages>

    </template>

</dom-module>

<script>

    Polymer({

        is: 'ts-translate',

        behaviors: [
            Polymer.IronResizableBehavior
        ],

        observers: [
            'onSelectedSourceChanged(selectedSource)'
        ],

        properties: {
            selected: {
                type: Number,
                value: 0
            },
            route: {
                type: String,
                value: '',
                notify: true
            },
            project: {
                type: Object,
                value: {}
            },
            sources: {
                type: Array,
                value: []
            },
            selectedSource: {
                type: Number,
                value: null
            },
            source: {
                type: Array,
                value: []
            },
            translation: {
                type: Array,
                value: []
            }
        },

        onSelectedSourceChanged: function(newValue) {
            if (newValue != null && newValue >= 0) {
                // The paper-tab won't get programmatically selected until after 30ms
                this.async(function() {
                    var source = document.querySelector('paper-tab.iron-selected').innerText;

                    //
                    // Write code to get new data based on source tab selection here...
                    //
                    console.log('refreshing data now to fetch', source);
                }, 30);
            }
        },

        attached: function() {
        },

        ready: function() {

            // Commenting this out to do the read-mode when it's empty
            this.translation = [
                {
                    meta: {
                        chapter: 1,
                        startverse: 1,
                        endverse: 5
                    },
                    content: 'In the beginning was the Word, and the Word was with God, and the Word was God. He was with God in the beginning. Through him all things were made; without him nothing was made that has been made. In him was life, and that life was the light of all mankind.',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 1,
                        startverse: 6,
                        endverse: 8
                    },
                    content: 'There was a man sent from God whose name was John. He came as a witness to testify concerning that light, so that through him all might believe. He himself was not the light; he came only as a witness to the light.',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 1,
                        startverse: 9,
                        endverse: 12
                    },
                    content: 'The true light that gives light to everyone was coming into the world. He was in the world, and though the world was made through him, the world did not recognize him. He came to that which was his own, but his own did not receive him. Yet to all who did receive him, to those who believed in his name, he gave the right to become children of God',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 2,
                        startverse: 1,
                        endverse: 4
                    },
                    content: 'On the third day a wedding took place at Cana in Galilee. Jesus’ mother was there, and Jesus and his disciples had also been invited to the wedding. When the wine was gone, Jesus’ mother said to him, “They have no more wine.” “Woman, why do you involve me?” Jesus replied. “My hour has not yet come.”',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 2,
                        startverse: 5,
                        endverse: 8
                    },
                    content: 'His mother said to the servants, “Do whatever he tells you.” Nearby stood six stone water jars, the kind used by the Jews for ceremonial washing, each holding from twenty to thirty gallons. Jesus said to the servants, “Fill the jars with water”; so they filled them to the brim. Then he told them, “Now draw some out and take it to the master of the banquet.” They did so',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 2,
                        startverse: 9,
                        endverse: 10
                    },
                    content: 'and the master of the banquet tasted the water that had been turned into wine. He did not realize where it had come from, though the servants who had drawn the water knew. Then he called the bridegroom aside and said, “Everyone brings out the choice wine first and then the cheaper wine after the guests have had too much to drink; but you have saved the best till now.”',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 3,
                        startverse: 1,
                        endverse: 4
                    },
                    content: 'Now there was a Pharisee, a man named Nicodemus who was a member of the Jewish ruling council. He came to Jesus at night and said, “Rabbi, we know that you are a teacher who has come from God. For no one could perform the signs you are doing if God were not with him.” Jesus replied, “Very truly I tell you, no one can see the kingdom of God unless they are born again.” “How can someone be born when they are old?” Nicodemus asked. “Surely they cannot enter a second time into their mother’s womb to be born!',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 3,
                        startverse: 5,
                        endverse: 8
                    },
                    content: 'Jesus answered, “Very truly I tell you, no one can enter the kingdom of God unless they are born of water and the Spirit. Flesh gives birth to flesh, but the Spirit[b] gives birth to spirit. You should not be surprised at my saying, ‘You must be born again.’ The wind blows wherever it pleases. You hear its sound, but you cannot tell where it comes from or where it is going. So it is with everyone born of the Spirit.”',
                    status: 'Incomplete'
                },
                {
                    meta: {
                        chapter: 3,
                        startverse: 9,
                        endverse: 12
                    },
                    content: '“How can this be?” Nicodemus asked. “You are Israel’s teacher,” said Jesus, “and do you not understand these things? Very truly I tell you, we speak of what we know, and we testify to what we have seen, but still you people do not accept our testimony. I have spoken to you of earthly things and you do not believe; how then will you believe if I speak of heavenly things?',
                    status: 'Incomplete'
                }
            ];

            // Commenting this out to do the read-mode when it's empty
            this.source = [
                {
                    meta: {
                        chapter: 1,
                        startverse: 1,
                        endverse: 5
                    },
                    content: '/v1 In the beginning was the Word, and the Word was with God, and the Word was God. /v2 He was with God in the beginning. /v3 Through him all things were made; without him nothing was made that has been made. /v4 In him was life, and that life was the light of all mankind. /v5 The light shines in the darkness, and the darkness has not overcome it.',
                    notes: 'Notes for Chunk 1',
                    words: 'Words for Chunk 1'
                },
                {
                    meta: {
                        chapter: 1,
                        startverse: 6,
                        endverse: 8
                    },
                    content: '/v6 There was a man sent from God whose name was John. /v7 He came as a witness to testify concerning that light, so that through him all might believe. /v8 He himself was not the light; he came only as a witness to the light.',
                    notes: 'Notes for Chunk 2',
                    words: 'Words for Chunk 2'
                },
                {
                    meta: {
                        chapter: 1,
                        startverse: 9,
                        endverse: 12
                    },
                    content: '/v9 The true light that gives light to everyone was coming into the world. /v10 He was in the world, and though the world was made through him, the world did not recognize him. /v11 He came to that which was his own, but his own did not receive him. /v12 Yet to all who did receive him, to those who believed in his name, he gave the right to become children of God',
                    notes: 'Notes for Chunk 3',
                    words: 'Words for Chunk 3'
                },
                {
                    meta: {
                        chapter: 2,
                        startverse: 1,
                        endverse: 4
                    },
                    content: 'On the third day a wedding took place at Cana in Galilee. Jesus’ mother was there, and Jesus and his disciples had also been invited to the wedding. When the wine was gone, Jesus’ mother said to him, “They have no more wine.” “Woman, why do you involve me?” Jesus replied. “My hour has not yet come.”',
                    notes: 'Notes for Chunk 4',
                    words: 'Words for Chunk 4'
                },
                {
                    meta: {
                        chapter: 2,
                        startverse: 5,
                        endverse: 8
                    },
                    content: 'His mother said to the servants, “Do whatever he tells you.” Nearby stood six stone water jars, the kind used by the Jews for ceremonial washing, each holding from twenty to thirty gallons. Jesus said to the servants, “Fill the jars with water”; so they filled them to the brim. Then he told them, “Now draw some out and take it to the master of the banquet.” They did so',
                    notes: 'Notes for Chunk 5',
                    words: 'Words for Chunk 5'
                },
                {
                    meta: {
                        chapter: 2,
                        startverse: 9,
                        endverse: 10
                    },
                    content: 'and the master of the banquet tasted the water that had been turned into wine. He did not realize where it had come from, though the servants who had drawn the water knew. Then he called the bridegroom aside and said, “Everyone brings out the choice wine first and then the cheaper wine after the guests have had too much to drink; but you have saved the best till now.”',
                    notes: 'Notes for Chunk 6',
                    words: 'Words for Chunk 6'
                },
                {
                    meta: {
                        chapter: 3,
                        startverse: 1,
                        endverse: 4
                    },
                    content: 'Now there was a Pharisee, a man named Nicodemus who was a member of the Jewish ruling council. He came to Jesus at night and said, “Rabbi, we know that you are a teacher who has come from God. For no one could perform the signs you are doing if God were not with him.” Jesus replied, “Very truly I tell you, no one can see the kingdom of God unless they are born again.” “How can someone be born when they are old?” Nicodemus asked. “Surely they cannot enter a second time into their mother’s womb to be born!',
                    notes: 'Notes for Chunk 7',
                    words: 'Words for Chunk 7'
                },
                {
                    meta: {
                        chapter: 3,
                        startverse: 5,
                        endverse: 8
                    },
                    content: 'Jesus answered, “Very truly I tell you, no one can enter the kingdom of God unless they are born of water and the Spirit. Flesh gives birth to flesh, but the Spirit[b] gives birth to spirit. You should not be surprised at my saying, ‘You must be born again.’ The wind blows wherever it pleases. You hear its sound, but you cannot tell where it comes from or where it is going. So it is with everyone born of the Spirit.”',
                    notes: 'Notes for Chunk 8',
                    words: 'Words for Chunk 8'
                },
                {
                    meta: {
                        chapter: 3,
                        startverse: 9,
                        endverse: 12
                    },
                    content: '“How can this be?” Nicodemus asked. “You are Israel’s teacher,” said Jesus, “and do you not understand these things? Very truly I tell you, we speak of what we know, and we testify to what we have seen, but still you people do not accept our testimony. I have spoken to you of earthly things and you do not believe; how then will you believe if I speak of heavenly things?',
                    notes: 'Notes for Chunk 9',
                    words: 'Words for Chunk 9'
                }
            ];

        }

    });

</script>
