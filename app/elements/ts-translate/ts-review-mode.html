
<link rel="import" href="./ts-translation-card.html">
<link rel="import" href="./ts-fakesource-card.html">

<dom-module id="ts-review-mode">

	<style>

		:host {
            display: flex;
            flex: auto;
        }

        .outer {
            flex: auto;
            overflow: auto;
        }

        .inner {
            display: flex;
            margin-top: 15px;
        }

        ts-translation-card {
            margin-left: 15px;
            min-width: 400px;
        }

        ts-fakesource-card {
            margin-left: 15px;
            min-width: 400px;
        }

	</style>

	<template>

        <div class="outer">
            <template is="dom-repeat" items="{{combination.data}}" as="chunk">
                <div class="inner">
                    <ts-fakesource-card language="[[language]]" book="[[book]]" chunk="[[chunk]]"></ts-fakesource-card>
                    <ts-translation-card language="[[language]]" book="[[book]]" chunk="[[chunk]]"></ts-translation-card>
                    <ts-translation-card language="[[language]]" book="[[book]]" chunk="[[chunk]]"></ts-translation-card>
                </div>
            </template>
        </div>

	</template>

</dom-module>

<script>

	Polymer({

		is: 'ts-review-mode',

        properties: {
            source: {
                type: Array,
                value: []
            },
            translation: {
                type: Array,
                value: [],
                notify: true
            },
            language: {
                type: Object,
                value: {}
            },
            book: {
                type: Object,
                value: {}
            },
            trans: {
                type: Object,
                value: {},
                computed: 'createtrans(translation)'
            },
            src: {
                type: Object,
                value: {},
                computed: 'createsrc(source)'
            },
            meta: {
                type: Object,
                value: {},
                computed: 'createmeta(source)'
            },
            combination: {
                type: Object,
                value: {},
                computed: 'createcombo(src, trans, meta)'
            }

        },

        createcombo: function (src, trans, meta) {
            var combo = {};

            combo = _.merge(src, trans, meta);

            return combo;
        },

        createtrans: function (translation) {
            var trans = [];
            var transdata = {};

            trans = translation.map(function(chunk){
                return {transcontent: chunk.content};
            });

            transdata.data = trans;

            return transdata;
        },

        createsrc: function (source) {
            var src = [];
            var srcdata = {};

            src = source.map(function(chunk){
                return {srccontent: chunk.content};
            });

            srcdata.data = src;

            return srcdata;
        },

        createmeta: function (source) {
            var meta = [];
            var metadata = {};

            meta = source.map(function(chunk){
                return {meta: chunk.meta};
            });

            metadata.data = meta;

            return metadata;
        },

		ready: function() {

		}
	});

</script>
