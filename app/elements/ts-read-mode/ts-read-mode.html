<!-- ts-read-mode -->

<!-- Used in <ts-dashboard> -->

<link rel="import" href="../../components/paper-card/paper-card.html"></link>

<dom-module id="ts-read-mode">

	<style is="custom-style">
	
		:host {
			display: block;
			/* The height of the title bar and the top green bar needs to be compensated */
			height: calc(100% - 102px);
			box-sizing: border-box;
		}

		.container {
			display: block;
			width: 100%;
			height: 100%;
			position: relative;
			z-index: 0;
			box-sizing: border-box;
			padding: 20px 20px 40px;
			overflow-y: auto;
		}
		.chapter-cards {
			width: 100%;
			position: relative;
			margin-bottom: 40px;
		}
		paper-card {
			width: calc(100% - 20px);
		}
		.top-card {
			position: relative;
			z-index: 1;
		}
		.bottom-card {
			position: absolute;
			top: 20px;
			right: 0;
			background-color: #EEE;
			cursor: pointer;
			transition: all 0.15s ease-out;
		}
		.bottom-card:hover {
			right: -3px;
			top: 25px;
		}
		.card-heading {
			padding: 1rem 0;
			text-align: center;
		}
		.card-heading h3 {
			margin: 0;
			padding: 1rem 0;
			color: #888;
		}
		.card-content {
			width: 60%;
			margin: 0 auto;
			padding-top: 0;
		}
		.card-content p {
			line-height: 1.8;
			margin-top: 0;
		}
		.hidden {
			visibility: hidden;
		}

		.sticky {
			position: fixed;
			z-index: 100;
			width: calc(100% - 20px);
			background-color: #DDD;
		}

		paper-tabs {
			--paper-tabs {
				font-size: 5rem;
			}
		}

	</style>

	<style>
	</style>

	<template>

		<div class="container" id="sticky-cue">
			<div class="tabs-div" id="sticky-ele">
				<paper-card class="tabs-container top-card">
					<paper-tabs id="source-tabs" selected="{{ selected }}" noink scrollable hideScrollButton>
                  <template is="dom-repeat" items="{{ tabs }}" as="tab">
                     <paper-tab class="source-tab" on-click="">{{ tab.translation }}</paper-tab>
                  </template>
               </paper-tabs>
				</paper-card>
			</div>
			<div>
				<iron-pages id="source-pages" selected="[[selected]]">
					<template is="dom-repeat" items="{{ tabs }}" as="tab">
						<div class="source-page">
							<template is="dom-repeat" items="{{ tab.content }}" as="chapter">
								<div class="chapter-cards">
									<paper-card class="top-card">
										<div class="card-heading">
											<h3><span>{{ tab.book_title }}</span> <span>{{ chapter.chapter }}</span></h3>
										</div>
										<div class="card-content">
												<p>{{ chapter.text }}</p>
										</div>
									</paper-card>
								</div>
							</template>
						</div>
					</template>
				</iron-pages>
			</div>
		</div>
	
	</template>

</dom-module>

<script>
	
	Polymer({

		is: 'ts-read-mode',

		properties: {

			title: {
				type: 'String',
				value: 'John'
			},

			selected: {
				type: 'Number',
				value: 0
			},

			tabs: {
				type: 'Array',
				value: [
					{
						translation: 'ULB',
						book_title: 'John',
						content: [
							{
								chapter: 1,
								text: 'In the beginning was the Word, and the Word was with God, and the Word was God. The same was in the beginning with God. All things were made by him; and without him was not any thing made that was made.'
							},
							{
								chapter: 2,
								text: 'And the Word was made flesh, and dwelt among us, (and we beheld his glory, the glory as of the only begotten of the Father,) full of grace and truth. John bare witness of him, and cried, saying, This was he of whom I spake, He that cometh after me is preferred before me: for he was before me.'
							},
							{
								chapter: 3,
								text: 'They came and saw where he dwelt, and abode with him that day: for it was about the tenth hour.'
							}
						]
					},
					{
						translation: 'UDB',
						book_title: 'Josh',
						content: [
							{
								chapter: 1,
								text: 'And the Word was made flesh, and dwelt among us, (and we beheld his glory, the glory as of the only begotten of the Father,) full of grace and truth. John bare witness of him, and cried, saying, This was he of whom I spake, He that cometh after me is preferred before me: for he was before me.'
							},
							{
								chapter: 2,
								text: 'In the beginning was the Word, and the Word was with God, and the Word was God. The same was in the beginning with God. All things were made by him; and without him was not any thing made that was made.'
							},
							{
								chapter: 3,
								text: 'They came and saw where he dwelt, and abode with him that day: for it was about the tenth hour.'
							}
						]
					}
				]
			}
		},

		attached: function() {

			// ===== STICKY TABS =====
			var ele = document.getElementById('sticky-ele');
			var cue = document.getElementById('sticky-cue');

			function stickEle() {
				if (cue.scrollTop > 20) {
					if (ele.className.indexOf('sticky') === -1) {
						ele.className += ' sticky';
					}
				} else {
					ele.className = ele.className.replace(' sticky', '');
				}
			}

			window.addEventListener('wheel', function() {
				stickEle();
			});
			// ----- sticky tabs -----

			// ===== SELECT TAB =====
			this.$['source-tabs'].selected = "0";
			// ----- select tab -----
		}
	})

</script>