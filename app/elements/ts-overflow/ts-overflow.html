<!--
Overflow menu.
-->

<link rel="import" href="ts-overflow-icons.html">

<dom-module id="ts-overflow">

  <style>

  :host {
    display: inline-block;
    height: 100vh;
  }

  #contains {
      position: relative;
  }

  #fullmenu {
      background: white;
      color: black;
      width: 12em;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
  }

  #minimenu {
      background: var(--primary-color-dark);
      color: white;
      width: 4em;
      height: 100vh;
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(0);
  }

  .displayed {
      -webkit-animation: show .2s linear both .2s;
  }

  .hidden {
      -webkit-animation: hide .2s linear forwards;
  }

  @-webkit-keyframes hide {
      0% {
          transform: translateX(0);
          display: inline;
      }
      100% {
          transform: translateX(-100%);
          display: none;
      }
  }

  @-webkit-keyframes show {
      0% {
          transform: translateX(-100%);
          display: none;
      }
      100% {
          transform: translateX(0);
          display: inline;
      }
  }

  ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
    font-family: 'Roboto';
    font-style: bold;
    font-size: 110%;
  }

  ul li {
      display: block;
      margin: 0;
      padding: 1em;
  }

  ul li:hover {
      background: var(--accent-color-dark);
      color: #fff;
  }

  iron-icon {
      padding-right: 2em;
  }

  .bottomlist {
      position: absolute;
      width: 100%;
      bottom: 100px;
  }

  li {
    margin: 1.5em 0.5em;
  }

  </style>

  <template>
      <iron-signals on-iron-signal-toggle-menu="toggleMenu"></iron-signals>

    <nav on-tap="openMenu">
        <div id="contains">
        <div id="minimenu">
            <div class="toplist">
              <ul>
                <li id="library"><iron-icon icon="overflow:library"></iron-icon></li>
                <li id="resources"><iron-icon icon="overflow:resources"></iron-icon></li>
              </ul>
            </div>
            <div class="bottomlist">
              <ul>
                <li id="settings"><iron-icon icon="overflow:settings"></iron-icon></li>
                <li><iron-icon icon="overflow:feedback"></iron-icon></li>
              </ul>
            </div>
        </div>
        <div id="fullmenu">
            <div class="toplist">
                <ul>
                    <li id="library"><iron-icon icon="overflow:library"></iron-icon>Library</li>
                    <li id="resources"><iron-icon icon="overflow:resources"></iron-icon>Resources</li>
                </ul>
            </div>
            <div class="bottomlist">
                <ul>
                    <li id="settings"><iron-icon icon="overflow:settings"></iron-icon>Settings</li>
                    <li><iron-icon icon="overflow:feedback"></iron-icon>Feedback</li>
                </ul>
            </div>
        </div>
        </div>
    </nav>
  </template>

</dom-module>

<script>

  Polymer({
    is: 'ts-overflow',

    openMenu: function(event) {
      var menu = event.target.id;
      if (menu) {
        this.fire('iron-signal', { name: 'open-menu', data: menu });
      }
    },

      toggleMenu: function(event) {
          var mini = this.$.minimenu;
          var full = this.$.fullmenu;

          if (mini.classList.contains("hidden")) {
              mini.classList.remove("hidden");
              mini.classList.add("displayed");
              full.classList.add("hidden");
              full.classList.remove("displayed");
          } else {
              mini.classList.add("hidden");
              mini.classList.remove("displayed");
              full.classList.remove("hidden");
              full.classList.add("displayed");
          }
      },

    ready: function() {

    }
  });

</script>

